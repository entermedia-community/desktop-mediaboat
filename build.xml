<project default="all" name="MediaBoat">


	<target name="all" depends="clean, jar,copy" />
	<property name="deployDir" value="deploy"/>

    <target name="compile">
        <mkdir dir="build/classes" />
        <javac includeantruntime="false" debug="on" srcdir="src"
               destdir="build/classes" target="1.6" source="1.6">
               
      <classpath>
        <fileset dir="lib">
          <include name="*.jar"/>
        </fileset>
      </classpath>
      <include name="**"/>
               
        </javac>
    </target>

    <target name="jar" depends="compile" >
        <mkdir dir="dist"/>
        <jar destfile="dist/MediaBoatClient.jar" manifest="MANIFEST.MF">
            <fileset dir="build/classes" includes="**/*.class" />
        </jar>

    	 <exec executable="/bin/bash">
    	    <arg value="installer/scripts/build-installers.sh"/>
    	  </exec>
    	
        <move overwrite="true" todir="${deployDir}/windows" includeEmptyDirs="yes" verbose="true">
            <fileset dir="../dist/windows" >
                <include name="**/*" />
            </fileset>
        </move>
        <move overwrite="true" todir="${deployDir}/mac" includeEmptyDirs="yes" verbose="true">
            <fileset dir="../dist/mac" >
                <include name="**/*" />
            </fileset>
        </move>
    </target>

   <target name="copy">
	  <copy todir="dist/lib">
		<fileset dir="lib">
		  <include name="*.jar"/>
		</fileset>
	</copy>   
   </target>
   
     <target name="clean">
        <delete dir="build" />
        <delete dir="dist" />
    </target>

</project>
